define("discourse/plugins/discourse-assign/discourse-assign/assigned-group-route-map",["exports"],(function(e){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;e.default={resource:"group",map:function(){this.route("assigned",(function(){this.route("show",{path:"/:filter"})}))}}})),define("discourse/plugins/discourse-assign/discourse-assign/assigned-messages-route-map",["exports"],(function(e){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;e.default={resource:"user.userPrivateMessages",map:function(){this.route("assigned")}}})),define("discourse/plugins/discourse-assign/discourse-assign/assigns-activity-route-map",["exports"],(function(e){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;e.default={resource:"user.userActivity",map:function(){this.route("assigned")}}})),Ember.TEMPLATES["javascripts/discourse-assign/connectors/above-review-filters/assigned-to-filter"]=Ember.HTMLBars.template({id:null,block:'{"symbols":[],"statements":[[7,"div",true],[10,"class","reviewable-filter discourse-assign-assign-to-filter"],[8],[0,"\\n  "],[7,"label",true],[10,"class","filter-label"],[8],[1,[28,"i18n",["discourse_assign.assigned_to"],null],false],[9],[0,"\\n  "],[1,[28,"email-group-user-chooser",null,[["value","onChange","autocomplete","options"],[[24,["additionalFilters","assigned_to"]],[28,"action",[[23,0,[]],"updateAssignedTo"],null],"off",[28,"hash",null,[["maximum","fullWidthWrap","filterPlaceholder","includeGroups","groupMembersOf"],[1,true,[24,["placeholderKey"]],false,[24,["allowedGroups"]]]]]]]],false],[0,"\\n"],[9],[0,"\\n"]],"hasEval":false}',meta:{moduleName:"javascripts/discourse-assign/connectors/above-review-filters/assigned-to-filter"}}),define("discourse/plugins/discourse-assign/discourse-assign/connectors/above-review-filters/assigned-to-filter",["exports","@ember/object"],(function(e,s){"use strict";var t;Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;var n,i,a,r,o,l,u=(n=t={updateAssignedTo:function(e){this.set("additionalFilters.assigned_to",e.firstObject)},shouldRender:function(e){return e.additionalFilters},setupComponent:function(e,s){var t=(s.siteSettings.assign_allowed_on_groups||"").split("|").filter(Boolean),n=this.site.groups.filter((function(e){return t.includes(e.id.toString())})).mapBy("name");s.set("allowedGroups",n)}},i="updateAssignedTo",a=[s.action],r=Object.getOwnPropertyDescriptor(t,"updateAssignedTo"),o=t,l={},Object.keys(r).forEach((function(e){l[e]=r[e]})),l.enumerable=!!l.enumerable,l.configurable=!!l.configurable,("value"in l||l.initializer)&&(l.writable=!0),l=a.slice().reverse().reduce((function(e,s){return s(n,i,e)||e}),l),o&&void 0!==l.initializer&&(l.value=l.initializer?l.initializer.call(o):void 0,l.initializer=void 0),void 0===l.initializer&&(Object.defineProperty(n,i,l),l=null),t);e.default=u})),Ember.TEMPLATES["javascripts/discourse-assign/connectors/advanced-search-options-below/assigned-advanced-search"]=Ember.HTMLBars.template({id:null,block:'{"symbols":[],"statements":[[7,"div",true],[10,"class","control-group"],[8],[0,"\\n  "],[7,"label",true],[10,"class","control-label"],[10,"for","search-assigned-to"],[8],[1,[28,"i18n",["search.advanced.assigned.label"],null],false],[9],[0,"\\n  "],[7,"div",true],[10,"class","controls"],[8],[0,"\\n    "],[1,[28,"email-group-user-chooser",null,[["value","onChange","options"],[[24,["searchedTerms","assigned"]],[28,"action",[[23,0,[]],"onChangeAssigned"],null],[28,"hash",null,[["maximum","excludeCurrentUser","includeGroups","customSearchOptions"],[1,false,true,[28,"hash",null,[["assignableGroups"],[true]]]]]]]]],false],[0,"\\n  "],[9],[0,"\\n"],[9],[0,"\\n"]],"hasEval":false}',meta:{moduleName:"javascripts/discourse-assign/connectors/advanced-search-options-below/assigned-advanced-search"}}),define("discourse/plugins/discourse-assign/discourse-assign/connectors/advanced-search-options-below/assigned-advanced-search",["exports","@ember/object"],(function(e,s){"use strict";var t;Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;var n,i,a,r,o,l,u=(n=t={shouldRender:function(e,s){var t;return null===(t=s.currentUser)||void 0===t?void 0:t.can_assign},onChangeAssigned:function(e){this.onChangeSearchedTermField("assigned","updateSearchTermForAssignedUsername",e)}},i="onChangeAssigned",a=[s.action],r=Object.getOwnPropertyDescriptor(t,"onChangeAssigned"),o=t,l={},Object.keys(r).forEach((function(e){l[e]=r[e]})),l.enumerable=!!l.enumerable,l.configurable=!!l.configurable,("value"in l||l.initializer)&&(l.writable=!0),l=a.slice().reverse().reduce((function(e,s){return s(n,i,e)||e}),l),o&&void 0!==l.initializer&&(l.value=l.initializer?l.initializer.call(o):void 0,l.initializer=void 0),void 0===l.initializer&&(Object.defineProperty(n,i,l),l=null),t);e.default=u})),Ember.TEMPLATES["javascripts/discourse-assign/connectors/category-custom-settings/assign-settings"]=Ember.HTMLBars.template({id:null,block:'{"symbols":[],"statements":[[7,"h3",true],[8],[1,[28,"i18n",["discourse_assign.assign.title"],null],false],[9],[0,"\\n"],[7,"section",true],[10,"class","field"],[8],[0,"\\n  "],[7,"div",true],[10,"class","enable-accepted-answer"],[8],[0,"\\n    "],[7,"label",true],[10,"class","checkbox-label"],[8],[0,"\\n      "],[1,[28,"input",null,[["type","checked","change"],["checkbox",[28,"readonly",[[24,["category","enable_unassigned_filter"]]],null],[28,"action",[[23,0,[]],"onChangeSetting"],[["value"],["target.checked"]]]]]],false],[0,"\\n      "],[1,[28,"i18n",["discourse_assign.add_unassigned_filter"],null],false],[0,"\\n    "],[9],[0,"\\n  "],[9],[0,"\\n"],[9],[0,"\\n"]],"hasEval":false}',meta:{moduleName:"javascripts/discourse-assign/connectors/category-custom-settings/assign-settings"}}),define("discourse/plugins/discourse-assign/discourse-assign/connectors/category-custom-settings/assign-settings",["exports","@ember/object"],(function(e,s){"use strict";var t;Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;var n,i,a,r,o,l,u=(n=t={onChangeSetting:function(e){this.set("category.custom_fields.enable_unassigned_filter",e?"true":"false")}},i="onChangeSetting",a=[s.action],r=Object.getOwnPropertyDescriptor(t,"onChangeSetting"),o=t,l={},Object.keys(r).forEach((function(e){l[e]=r[e]})),l.enumerable=!!l.enumerable,l.configurable=!!l.configurable,("value"in l||l.initializer)&&(l.writable=!0),l=a.slice().reverse().reduce((function(e,s){return s(n,i,e)||e}),l),o&&void 0!==l.initializer&&(l.value=l.initializer?l.initializer.call(o):void 0,l.initializer=void 0),void 0===l.initializer&&(Object.defineProperty(n,i,l),l=null),t);e.default=u})),Ember.TEMPLATES["javascripts/discourse-assign/connectors/group-reports-nav-item/assigned-topic-list"]=Ember.HTMLBars.template({id:null,block:'{"symbols":[],"statements":[[1,[28,"group-assigned-menu-item",null,[["group"],[[24,["group"]]]]],false],[0,"\\n"]],"hasEval":false}',meta:{moduleName:"javascripts/discourse-assign/connectors/group-reports-nav-item/assigned-topic-list"}}),define("discourse/plugins/discourse-assign/discourse-assign/connectors/group-reports-nav-item/assigned-topic-list",["exports"],(function(e){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;e.default={shouldRender:function(e,s){return s.currentUser&&s.currentUser.can_assign&&e.group.can_show_assigned_tab&&e.group.assignment_count>0}}})),Ember.TEMPLATES["javascripts/discourse-assign/connectors/groups-interaction-custom-options/assignable-interaction-fields"]=Ember.HTMLBars.template({id:null,block:'{"symbols":[],"statements":[[7,"div",true],[10,"class","control-group"],[8],[0,"\\n  "],[7,"label",true],[10,"class","control-label"],[8],[1,[28,"i18n",["discourse_assign.admin.groups.manage.interaction.assign"],null],false],[9],[0,"\\n  "],[7,"label",true],[10,"for","visiblity"],[8],[1,[28,"i18n",["discourse_assign.admin.groups.manage.interaction.assignable_levels.title"],null],false],[9],[0,"\\n\\n  "],[1,[28,"combo-box",null,[["name","valueProperty","value","content","class","onChange"],["alias","value",[24,["assignableLevel"]],[24,["assignableLevelOptions"]],"groups-form-assignable-level",[28,"action",[[23,0,[]],[28,"mut",[[24,["model","assignable_level"]]],null]],null]]]],false],[0,"\\n"],[9],[0,"\\n"]],"hasEval":false}',meta:{moduleName:"javascripts/discourse-assign/connectors/groups-interaction-custom-options/assignable-interaction-fields"}}),define("discourse/plugins/discourse-assign/discourse-assign/connectors/groups-interaction-custom-options/assignable-interaction-fields",["exports","I18n","@ember/object/computed","@ember/object"],(function(e,s,t,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;var i={name:"assignable-interaction-fields",setupComponent:function(e,i){this.assignableLevelOptions=[{name:s.default.t("groups.alias_levels.nobody"),value:0},{name:s.default.t("groups.alias_levels.only_admins"),value:1},{name:s.default.t("groups.alias_levels.mods_and_admins"),value:2},{name:s.default.t("groups.alias_levels.members_mods_and_admins"),value:3},{name:s.default.t("groups.alias_levels.owners_mods_and_admins"),value:4},{name:s.default.t("groups.alias_levels.everyone"),value:99}],(0,n.defineProperty)(i,"assignableLevel",(0,t.or)("model.assignable_level","assignableLevelOptions.firstObject.value"))}};e.default=i})),Ember.TEMPLATES["javascripts/discourse-assign/connectors/user-activity-bottom/assigned-list"]=Ember.HTMLBars.template({id:null,block:'{"symbols":[],"statements":[[4,"if",[[24,["currentUser","can_assign"]]],null,{"statements":[[4,"link-to",null,[["route"],["userActivity.assigned"]],{"statements":[[0,"    "],[1,[28,"d-icon",["user-plus"],null],false],[0," "],[1,[28,"i18n",["discourse_assign.assigned"],null],false],[0,"\\n"]],"parameters":[]},null]],"parameters":[]},null]],"hasEval":false}',meta:{moduleName:"javascripts/discourse-assign/connectors/user-activity-bottom/assigned-list"}}),Ember.TEMPLATES["javascripts/discourse-assign/connectors/user-messages-nav/assigned-messages"]=Ember.HTMLBars.template({id:null,block:'{"symbols":[],"statements":[[4,"link-to",null,[["route","model"],["userPrivateMessages.assigned",[24,["model"]]]],{"statements":[[0,"  "],[1,[28,"d-icon",["user-plus"],[["class"],["glyph"]]],false],[0,"\\n  "],[1,[28,"i18n",["discourse_assign.assigned"],null],false],[0,"\\n"]],"parameters":[]},null]],"hasEval":false}',meta:{moduleName:"javascripts/discourse-assign/connectors/user-messages-nav/assigned-messages"}}),define("discourse/plugins/discourse-assign/discourse-assign/connectors/user-messages-nav/assigned-messages",["exports"],(function(e){"use strict";function s(e,s){return s.currentUser&&s.currentUser.get("can_assign")&&(!s.get("site.mobileView")||e.model.get("isPrivateMessage"))}Object.defineProperty(e,"__esModule",{value:!0}),e.shouldShowAssigned=s,e.default=void 0;var t={shouldRender:function(e,t){return s(e,t)}};e.default=t})),Ember.TEMPLATES["javascripts/discourse-assign/connectors/user-preferences-notifications/remind-assigns-frequency"]=Ember.HTMLBars.template({id:null,block:'{"symbols":[],"statements":[[1,[28,"remind-assigns-frequency",null,[["user"],[[24,["model"]]]]],false],[0,"\\n"]],"hasEval":false}',meta:{moduleName:"javascripts/discourse-assign/connectors/user-preferences-notifications/remind-assigns-frequency"}}),define("discourse/plugins/discourse-assign/discourse-assign/connectors/user-preferences-notifications/remind-assigns-frequency",["exports"],(function(e){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;e.default={shouldRender:function(e,s){return s.currentUser&&s.currentUser.get("can_assign")}}})),define("discourse/plugins/discourse-assign/discourse-assign/controllers/assign-user",["exports","@ember/controller","@ember/service","discourse/lib/ajax","discourse/lib/ajax-error","@ember/object/computed","@ember/utils","@ember/object"],(function(e,s,t,n,i,a,r,o){"use strict";var l;function u(e,s,t,n,i){var a={};return Object.keys(n).forEach((function(e){a[e]=n[e]})),a.enumerable=!!a.enumerable,a.configurable=!!a.configurable,("value"in a||a.initializer)&&(a.writable=!0),a=t.slice().reverse().reduce((function(t,n){return n(e,s,t)||t}),a),i&&void 0!==a.initializer&&(a.value=a.initializer?a.initializer.call(i):void 0,a.initializer=void 0),void 0===a.initializer&&(Object.defineProperty(e,s,a),a=null),a}Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;var c=s.default.extend((l={topicBulkActions:(0,s.inject)(),assignSuggestions:null,allowedGroups:null,taskActions:(0,t.inject)(),autofocus:(0,a.not)("capabilities.touch"),assigneeName:(0,a.or)("model.username","model.group_name"),init:function(){var e=this;this._super.apply(this,arguments),this.allowedGroups=[],(0,n.ajax)("/assign/suggestions").then((function(s){e.set("assignSuggestions",s.suggestions),e.set("allowedGroups",s.assign_allowed_on_groups),e.set("allowedGroupsForAssignment",s.assign_allowed_for_groups)}))},onClose:function(){this.get("model.onClose")&&this.get("model.username")&&this.get("model.onClose")(this.get("model.username"))},bulkAction:function(e){this.topicBulkActions.performAndRefresh({type:"assign",username:e})},assign:function(){var e=this;if(!this.isBulkAction){var s="/assign/assign";return(0,r.isEmpty)(this.get("model.username"))&&this.model.target.set("assigned_to_user",null),(0,r.isEmpty)(this.get("model.group_name"))&&this.model.target.set("assigned_to_group",null),(0,r.isEmpty)(this.get("model.username"))&&(0,r.isEmpty)(this.get("model.group_name"))&&(s="/assign/unassign"),this.send("closeModal"),(0,n.ajax)(s,{type:"PUT",data:{username:this.get("model.username"),group_name:this.get("model.group_name"),target_id:this.get("model.target.id"),target_type:this.get("model.targetType")}}).then((function(){var s;null===(s=e.get("model.onSuccess"))||void 0===s||s()})).catch(i.popupAjaxError)}this.bulkAction(this.model.username)},assignUser:function(e){if(!this.isBulkAction)return this.allowedGroupsForAssignment.includes(e)?this.setProperties({"model.username":null,"model.group_name":e,"model.allowedGroups":this.taskActions.allowedGroups}):this.setProperties({"model.username":e,"model.group_name":null,"model.allowedGroups":this.taskActions.allowedGroups}),e?this.assign():void 0;this.bulkAction(e)},assignUsername:function(e){this.assignUser(e.firstObject)}},u(l,"assign",[o.action],Object.getOwnPropertyDescriptor(l,"assign"),l),u(l,"assignUser",[o.action],Object.getOwnPropertyDescriptor(l,"assignUser"),l),u(l,"assignUsername",[o.action],Object.getOwnPropertyDescriptor(l,"assignUsername"),l),l));e.default=c})),define("discourse/plugins/discourse-assign/discourse-assign/controllers/group-assigned-show",["exports","discourse/controllers/user-topics-list","@ember/object/computed","discourse-common/lib/debounce","discourse-common/config/environment","@ember/controller","@ember/service","@ember/object"],(function(e,s,t,n,i,a,r,o){"use strict";var l;function u(e,s,t,n,i){var a={};return Object.keys(n).forEach((function(e){a[e]=n[e]})),a.enumerable=!!a.enumerable,a.configurable=!!a.configurable,("value"in a||a.initializer)&&(a.writable=!0),a=t.slice().reverse().reduce((function(t,n){return n(e,s,t)||t}),a),i&&void 0!==a.initializer&&(a.value=a.initializer?a.initializer.call(i):void 0,a.initializer=void 0),void 0===a.initializer&&(Object.defineProperty(e,s,a),a=null),a}Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;var c=s.default.extend((l={user:(0,a.inject)(),taskActions:(0,r.inject)(),order:"",ascending:!1,search:"",bulkSelectEnabled:!1,selected:[],canBulkSelect:(0,t.alias)("currentUser.staff"),queryParams:["order","ascending","search"],_setSearchTerm:function(e){this.set("search",e),this.refreshModel()},refreshModel:function(){var e=this;this.set("loading",!0),this.store.findFiltered("topicList",{filter:this.model.filter,params:{order:this.order,ascending:this.ascending,search:this.search,direct:this.model.params.direct}}).then((function(s){return e.set("model",s)})).finally((function(){e.set("loading",!1)}))},unassign:function(e){var s=this,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"Topic";this.taskActions.unassign(e,t).then((function(){return s.send("changeAssigned")}))},reassign:function(e){var s=this;this.taskActions.assign(e).set("model.onSuccess",(function(){return s.send("changeAssigned")}))},changeSort:function(e){e===this.order?(this.toggleProperty("ascending"),this.refreshModel()):(this.setProperties({order:e,ascending:!1}),this.refreshModel())},onChangeFilter:function(e){(0,n.default)(this,this._setSearchTerm,e,2*i.INPUT_DELAY)},toggleBulkSelect:function(){this.toggleProperty("bulkSelectEnabled")},refresh:function(){this.refreshModel()}},u(l,"unassign",[o.action],Object.getOwnPropertyDescriptor(l,"unassign"),l),u(l,"reassign",[o.action],Object.getOwnPropertyDescriptor(l,"reassign"),l),u(l,"changeSort",[o.action],Object.getOwnPropertyDescriptor(l,"changeSort"),l),u(l,"onChangeFilter",[o.action],Object.getOwnPropertyDescriptor(l,"onChangeFilter"),l),u(l,"toggleBulkSelect",[o.action],Object.getOwnPropertyDescriptor(l,"toggleBulkSelect"),l),u(l,"refresh",[o.action],Object.getOwnPropertyDescriptor(l,"refresh"),l),l));e.default=c})),define("discourse/plugins/discourse-assign/discourse-assign/controllers/group-assigned",["exports","@ember/service","@ember/controller","@ember/object","discourse/lib/ajax","discourse-common/utils/decorators","discourse-common/lib/debounce","discourse-common/config/environment"],(function(e,s,t,n,i,a,r,o){"use strict";var l,u,c,d,g;function p(e,s,t,n,i){var a={};return Object.keys(n).forEach((function(e){a[e]=n[e]})),a.enumerable=!!a.enumerable,a.configurable=!!a.configurable,("value"in a||a.initializer)&&(a.writable=!0),a=t.slice().reverse().reduce((function(t,n){return n(e,s,t)||t}),a),i&&void 0!==a.initializer&&(a.value=a.initializer?a.initializer.call(i):void 0,a.initializer=void 0),void 0===a.initializer&&(Object.defineProperty(e,s,a),a=null),a}Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;var m=t.default.extend((l=(0,a.default)("router.currentRoute.queryParams.order"),u=(0,a.default)("router.currentRoute.queryParams.ascending"),c=(0,a.default)("router.currentRoute.queryParams.search"),d=(0,a.default)("site.mobileView"),p(g={router:(0,s.inject)(),application:(0,t.inject)(),loading:!1,offset:0,filterName:"",filter:"",order:function(e){return e||""},ascending:function(e){return e||!1},search:function(e){return e||""},isDesktop:function(e){return!e},_setFilter:function(e){var s=this;this.set("loading",!0),this.set("offset",0),this.set("filter",e);var t=this.group.name;(0,i.ajax)("/assign/members/".concat(t),{type:"GET",data:{filter:this.filter,offset:this.offset}}).then((function(e){"everyone"!==s.router.currentRoute.params.filter&&s.transitionToRoute("group.assigned.show",t,"everyone"),s.set("members",e.members)})).finally((function(){s.set("loading",!1)}))},findMembers:function(e){var s=this;e?this.set("members",this.model.members):!this.loading&&this.model&&this.model.members.length>=this.offset+50&&(this.set("loading",!0),this.set("offset",this.offset+50),(0,i.ajax)("/assign/members/".concat(this.group.name),{type:"GET",data:{filter:this.filter,offset:this.offset}}).then((function(e){s.members.pushObjects(e.members)})).finally((function(){return s.set("loading",!1)})))},loadMore:function(){this.findMembers()},onChangeFilterName:function(e){(0,r.default)(this,this._setFilter,e,2*o.INPUT_DELAY)}},"order",[l],Object.getOwnPropertyDescriptor(g,"order"),g),p(g,"ascending",[u],Object.getOwnPropertyDescriptor(g,"ascending"),g),p(g,"search",[c],Object.getOwnPropertyDescriptor(g,"search"),g),p(g,"isDesktop",[d],Object.getOwnPropertyDescriptor(g,"isDesktop"),g),p(g,"loadMore",[n.action],Object.getOwnPropertyDescriptor(g,"loadMore"),g),p(g,"onChangeFilterName",[n.action],Object.getOwnPropertyDescriptor(g,"onChangeFilterName"),g),g));e.default=m})),define("discourse/plugins/discourse-assign/discourse-assign/controllers/user-activity-assigned",["exports","discourse/controllers/user-topics-list","discourse-common/utils/decorators","discourse-common/lib/debounce","discourse-common/config/environment","@ember/controller","@ember/service","@ember/object","discourse-common/lib/get-url","discourse-common/lib/icon-library","I18n"],(function(e,s,t,n,i,a,r,o,l,u,c){"use strict";var d,g;function p(e,s,t,n,i){var a={};return Object.keys(n).forEach((function(e){a[e]=n[e]})),a.enumerable=!!a.enumerable,a.configurable=!!a.configurable,("value"in a||a.initializer)&&(a.writable=!0),a=t.slice().reverse().reduce((function(t,n){return n(e,s,t)||t}),a),i&&void 0!==a.initializer&&(a.value=a.initializer?a.initializer.call(i):void 0,a.initializer=void 0),void 0===a.initializer&&(Object.defineProperty(e,s,a),a=null),a}Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;var m=s.default.extend((d=(0,t.default)("model.topics.length","search"),g={user:(0,a.inject)(),taskActions:(0,r.inject)(),queryParams:["order","ascending","search"],order:"",ascending:!1,search:"",_setSearchTerm:function(e){this.set("search",e),this.refreshModel()},doesntHaveAssignments:function(e,s){return!s&&!e},emptyStateBody:function(){return c.default.t("user.no_assignments_body",{preferencesUrl:(0,l.default)("/my/preferences/notifications"),icon:(0,u.iconHTML)("user-plus")}).htmlSafe()},refreshModel:function(){var e=this;this.set("loading",!0),this.store.findFiltered("topicList",{filter:this.model.filter,params:{order:this.order,ascending:this.ascending,search:this.search}}).then((function(s){return e.set("model",s)})).finally((function(){e.set("loading",!1)}))},unassign:function(e){var s=this,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"Topic";this.taskActions.unassign(e,t).then((function(){return s.send("changeAssigned")}))},reassign:function(e){var s=this;this.taskActions.assign(e).set("model.onSuccess",(function(){return s.send("changeAssigned")}))},changeSort:function(e){e===this.order?(this.toggleProperty("ascending"),this.refreshModel()):(this.setProperties({order:e,ascending:!1}),this.refreshModel())},onChangeFilter:function(e){(0,n.default)(this,this._setSearchTerm,e,2*i.INPUT_DELAY)}},p(g,"doesntHaveAssignments",[d],Object.getOwnPropertyDescriptor(g,"doesntHaveAssignments"),g),p(g,"emptyStateBody",[t.default],Object.getOwnPropertyDescriptor(g,"emptyStateBody"),g),p(g,"unassign",[o.action],Object.getOwnPropertyDescriptor(g,"unassign"),g),p(g,"reassign",[o.action],Object.getOwnPropertyDescriptor(g,"reassign"),g),p(g,"changeSort",[o.action],Object.getOwnPropertyDescriptor(g,"changeSort"),g),p(g,"onChangeFilter",[o.action],Object.getOwnPropertyDescriptor(g,"onChangeFilter"),g),g));e.default=m})),define("discourse/plugins/discourse-assign/discourse-assign/initializers/extend-for-assigns",["exports","discourse/helpers/user-avatar","discourse/lib/plugin-api","discourse-common/utils/decorators","discourse-common/lib/icon-library","virtual-dom","discourse/widgets/widget","discourse-common/lib/get-owner","@ember/template","discourse-common/lib/get-url","discourse/components/search-advanced-options","discourse/controllers/topic-bulk-actions","@ember/controller","I18n","@ember/utils","discourse/lib/register-topic-footer-dropdown"],(function(e,s,t,n,i,a,r,o,l,u,c,d,g,p,m,f){"use strict";function h(e,s){return function(e){if(Array.isArray(e))return e}(e)||function(e,s){if("undefined"==typeof Symbol||!(Symbol.iterator in Object(e)))return;var t=[],n=!0,i=!1,a=void 0;try{for(var r,o=e[Symbol.iterator]();!(n=(r=o.next()).done)&&(t.push(r.value),!s||t.length!==s);n=!0);}catch(e){i=!0,a=e}finally{try{n||null==o.return||o.return()}finally{if(i)throw a}}return t}(e,s)||function(e,s){if(!e)return;if("string"==typeof e)return v(e,s);var t=Object.prototype.toString.call(e).slice(8,-1);"Object"===t&&e.constructor&&(t=e.constructor.name);if("Map"===t||"Set"===t)return Array.from(e);if("Arguments"===t||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(t))return v(e,s)}(e,s)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function v(e,s){(null==s||s>e.length)&&(s=e.length);for(var t=0,n=new Array(s);t<s;t++)n[t]=e[t];return n}function b(e,s,t,n,i){var a={};return Object.keys(n).forEach((function(e){a[e]=n[e]})),a.enumerable=!!a.enumerable,a.configurable=!!a.configurable,("value"in a||a.initializer)&&(a.writable=!0),a=t.slice().reverse().reduce((function(t,n){return n(e,s,t)||t}),a),i&&void 0!==a.initializer&&(a.value=a.initializer?a.initializer.call(i):void 0,a.initializer=void 0),void 0===a.initializer&&(Object.defineProperty(e,s,a),a=null),a}Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;var _="discourse-assign",y=["topic.assigned_to_user","topic.assigned_to_group","currentUser.can_assign","topic.assigned_to_user.username"];function P(e){return(s=e.get("topic.assigned_to_user.username")||e.get("topic.assigned_to_group.name"))?p.default.t("discourse_assign.unassign.help",{username:s}):p.default.t("discourse_assign.assign.help");var s}var w=/^(assigned:)/gi,j={name:"extend-for-assign",initialize:function(e){if(e.lookup("site-settings:main").assign_enabled){var v=e.lookup("current-user:main");(null==v?void 0:v.can_assign)&&(c.default.reopen({updateSearchTermForAssignedUsername:function(){var e=this.filterBlocks(w),s=this.get("searchedTerms.assigned"),t=this.searchTerm||"",n="assigned";0!==(null==s?void 0:s.length)?(0!==e.length?t=t.replace(e[0],"".concat(n,":").concat(s)):t+=" ".concat(n,":").concat(s),this._updateSearchTerm(t)):0!==e.length&&(t=t.replace(e[0],""),this._updateSearchTerm(t))}}),d.default.reopen({assignUser:(0,g.inject)("assign-user"),actions:{showReAssign:function(){this.set("assignUser.isBulkAction",!0),this.set("assignUser.model",{username:"",description:"discourse_assign.assign_bulk_modal.description"}),this.send("changeBulkTemplate","modal/assign-user")},unassignTopics:function(){this.performAndRefresh({type:"unassign"})}}}),(0,d.addBulkButton)("showReAssign","assign",{icon:"user-plus",class:"btn-default"}),(0,d.addBulkButton)("unassignTopics","unassign",{icon:"user-times",class:"btn-default"})),(0,t.withPluginApi)("0.13.0",(function(e){return function(e){e.modifyClass("model:topic",{pluginId:_,isAssigned:function(){return this.assigned_to_user||this.assigned_to_group}})}(e)})),(0,t.withPluginApi)("0.11.0",(function(e){return function(e){var s,t,l,c,d,g=e.container.lookup("site-settings:main"),f=e.getCurrentUser();function v(e){return(0,u.default)(g.assigns_user_url_path.replace("{username}",e.username))}function y(e){return(0,u.default)("/g/".concat(e.name,"/assigned/everyone"))}(g.assigns_public||(null==f?void 0:f.can_assign))&&(e.addNavigationBarItem({name:"unassigned",customFilter:function(e){var s;return"true"===(null==e||null===(s=e.custom_fields)||void 0===s?void 0:s.enable_unassigned_filter)},customHref:function(e){if(e)return(0,u.default)(e.url)+"/l/latest?status=open&assigned=nobody"},forceActive:function(e,s){var t=s.currentRouteQueryParams;return t&&2===Object.keys(t).length&&"nobody"===t.assigned&&"open"===t.status},before:"top"}),e.getCurrentUser()&&e.getCurrentUser().can_assign&&(e.addPostMenuButton("assign",(function(s){var t;if(!s.firstPost)return s.assigned_to_user||s.assigned_to_group?{action:"unassignPost",icon:"user-times",className:"unassign-post",title:"discourse_assign.unassign_post.title",position:(null===(t=s.assigned_to_user)||void 0===t?void 0:t.id)===e.getCurrentUser().id?"first":"second-last-hidden"}:{action:"assignPost",icon:"user-plus",className:"assign-post",title:"discourse_assign.assign_post.title",position:"second-last-hidden"}})),e.attachWidgetAction("post","assignPost",(function(){(0,o.getOwner)(this).lookup("service:task-actions").assign(this.model,{isAssigned:!1,targetType:"Post"})})),e.attachWidgetAction("post","unassignPost",(function(){var e=this;(0,o.getOwner)(this).lookup("service:task-actions").unassign(this.model.id,"Post").then((function(){delete e.model.topic.indirectly_assigned_to[e.model.id]}))})))),e.addAdvancedSearchOptions(e.getCurrentUser()&&e.getCurrentUser().can_assign?{inOptionsForUsers:[{name:p.default.t("search.advanced.in.assigned"),value:"assigned"},{name:p.default.t("search.advanced.in.unassigned"),value:"unassigned"}]}:{}),e.modifyClass("model:bookmark",(s=(0,n.default)("assigned_to_user"),t=(0,n.default)("assigned_to_group"),b(l={pluginId:_,assignedToUserPath:function(e){return v(e)},assignedToGroupPath:function(e){return y(e)}},"assignedToUserPath",[s],Object.getOwnPropertyDescriptor(l,"assignedToUserPath"),l),b(l,"assignedToGroupPath",[t],Object.getOwnPropertyDescriptor(l,"assignedToGroupPath"),l),l)),e.modifyClass("component:topic-notifications-button",(c=(0,n.default)("topic","topic.details.{notification_level,notifications_reason_id}"),d={pluginId:_,notificationReasonText:function(e){return this.currentUser.never_auto_track_topics&&e.assigned_to_user&&e.assigned_to_user.username===this.currentUser.username?p.default.t("notification_reason.user"):this._super.apply(this,arguments)}},b(d,"notificationReasonText",[c],Object.getOwnPropertyDescriptor(d,"notificationReasonText"),d),d)),e.addPostSmallActionIcon("assigned","user-plus"),e.addPostSmallActionIcon("assigned_to_post","user-plus"),e.addPostSmallActionIcon("assigned_group","group-plus"),e.addPostSmallActionIcon("assigned_group_to_post","group-plus"),e.addPostSmallActionIcon("unassigned","user-times"),e.addPostSmallActionIcon("unassigned_group","group-times"),e.addPostSmallActionIcon("unassigned_from_post","user-times"),e.addPostSmallActionIcon("unassigned_group_from_post","group-times"),e.includePostAttributes("assigned_to_user","assigned_to_group"),e.addPostSmallActionIcon("reassigned","user-plus"),e.addPostSmallActionIcon("reassigned_group","group-plus"),e.addPostTransformCallback((function(e){["assigned","unassigned","reassigned","assigned_group","unassigned_group","reassigned_group","assigned_to_post","assigned_group_to_post","unassigned_from_post","unassigned_group_from_post"].includes(e.actionCode)&&(e.isSmallAction=!0,e.canEdit=!1)})),e.addDiscoveryQueryParam("assigned",{replace:!0,refreshModel:!0}),e.addTagsHtmlCallback((function(e){var s,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=h(Object.values(e.getProperties("assigned_to_user","assigned_to_group")),2),a=n[0],r=n[1];s=e.get("indirectly_assigned_to")?Object.entries(e.get("indirectly_assigned_to")).map((function(e){var s=h(e,2),t=s[0],n=s[1];return n.assigned_to.assignedToPostId=t,n})):[];var o=[].concat(a,r,s.map((function(e){return e.assigned_to}))).filter((function(e){return e})).flat().uniqBy((function(e){return e.assign_path}));if(o)return o.map((function(s){var n;n=s.assignedToPostId?"/p/".concat(s.assignedToPostId):"/t/".concat(e.id);var a=(0,i.iconHTML)(s.assign_icon),r=s.username||s.name,o=t.tagName||"a",l="a"===o?'href="'.concat(n,'" data-auto-route="true"'):"";return"<".concat(o,' class="assigned-to discourse-tag simple" ').concat(l,">\n        ").concat(a,"\n        <span>").concat(r,"</span>\n      </").concat(o,">")})).join("")})),e.addUserMenuGlyph((function(e){if(e.currentUser&&e.currentUser.can_assign){var s={label:"discourse_assign.assigned",className:"assigned",icon:"user-plus",href:"".concat(e.currentUser.path,"/activity/assigned")};return(0,r.queryRegistry)("quick-access-panel")&&(s.action="quickAccess",s.actionParam="assignments"),s}})),e.createWidget("assigned-to",{html:function(e){var s=e.assignedToUser,t=e.assignedToGroup,n=e.href;return(0,a.h)("p.assigned-to",[s?(0,i.iconNode)("user-plus"):(0,i.iconNode)("group-plus"),(0,a.h)("span.assign-text",p.default.t("discourse_assign.assigned_to")),(0,a.h)("a",{attributes:{class:"assigned-to-username",href:n}},s?s.username:t.name)])}}),e.createWidget("assigned-to-first-post",{html:function(e){var s=e.topic,t=[s.assigned_to_user,s.assigned_to_group,s.indirectly_assigned_to],n=t[0],r=t[1],o=t[2],l=[];if(n&&l.push((0,a.h)("span.assignee",[(0,a.h)("a",{attributes:{class:"assigned-to-username",href:v(n)}},n.username)])),r&&l.push((0,a.h)("span.assignee",[(0,a.h)("a",{attributes:{class:"assigned-to-group",href:y(r)}},r.name)])),o&&Object.keys(o).map((function(e){var t=o[e].assigned_to,n=o[e].post_number;l.push((0,a.h)("span.assignee",[(0,a.h)("a",{attributes:{class:"assigned-indirectly",href:"".concat(s.url,"/").concat(n)}},"#".concat(n," ").concat(t.username||t.name))]))})),!(0,m.isEmpty)(l))return(0,a.h)("p.assigned-to",[n?(0,i.iconNode)("user-plus"):(0,i.iconNode)("group-plus"),(0,a.h)("span.assign-text",p.default.t("discourse_assign.assigned_to")),l])}}),e.modifyClass("model:group",{pluginId:_,asJSON:function(){return Object.assign({},this._super.apply(this,arguments),{assignable_level:this.assignable_level})}}),e.modifyClass("controller:topic",{pluginId:_,subscribe:function(){var e=this;this._super.apply(this,arguments),this.messageBus.subscribe("/staff/topic-assignment",(function(s){var t=e.model,n=t.id;if(s.topic_id===n){var i;s.post_id&&(i=t.postStream.posts.find((function(e){return e.id===s.post_id})));var a=i||t;"User"===s.assigned_type&&(a.set("assigned_to_user_id","assigned"===s.type?s.assigned_to.id:null),a.set("assigned_to_user",s.assigned_to)),"Group"===s.assigned_type&&(a.set("assigned_to_group_id","assigned"===s.type?s.assigned_to.id:null),a.set("assigned_to_group",s.assigned_to)),s.post_id&&("unassigned"===s.type&&delete t.indirectly_assigned_to[s.post_number],e.appEvents.trigger("post-stream:refresh",{id:t.postStream.posts[0].id}),e.appEvents.trigger("post-stream:refresh",{id:s.post_id}))}e.appEvents.trigger("header:update-topic",t)}))},unsubscribe:function(){this._super.apply(this,arguments),this.get("model.id")&&this.messageBus.unsubscribe("/staff/topic-assignment")}}),e.decorateWidget("post-contents:after-cooked",(function(e){var s=e.getModel();if(s){var t,n,i,a,r,o,l,u;if(1===e.attrs.post_number)return e.widget.attach("assigned-to-first-post",{topic:s.topic});if((null===(l=i=null===(r=s.topic.indirectly_assigned_to)||void 0===r||null===(o=r[s.id])||void 0===o?void 0:o.assigned_to)||void 0===l?void 0:l.username)&&(t=i),(null===(u=i)||void 0===u?void 0:u.name)&&(n=i),(t||n)&&(a=t?v(t):y(n)),a)return e.widget.attach("assigned-to",{assignedToUser:t,assignedToGroup:n,href:a})}})),e.replaceIcon("notification.assigned","user-plus"),e.replaceIcon("notification.discourse_assign.assign_group_notification","group-plus"),e.modifyClass("controller:preferences/notifications",{pluginId:_,actions:{save:function(){this.saveAttrNames.push("custom_fields"),this._super.apply(this,arguments)}}}),e.addKeyboardShortcut("g a","",{path:"/my/activity/assigned"})}(e)})),(0,t.withPluginApi)("0.8.28",(function(e){return function(e){(0,f.registerTopicFooterDropdown)({id:"reassign",action:function(e){var s=this;if(this.get("currentUser.can_assign")){var t=(0,o.getOwner)(this).lookup("service:task-actions");switch(e){case"unassign":this.set("topic.assigned_to_user",null),this.set("topic.assigned_to_group",null),t.unassign(this.topic.id).then((function(){s.appEvents.trigger("post-stream:refresh",{id:s.topic.postStream.firstPostId})}));break;case"reassign-self":this.set("topic.assigned_to_user",null),this.set("topic.assigned_to_group",null),t.reassignUserToTopic(this.currentUser,this.topic).then((function(){s.appEvents.trigger("post-stream:refresh",{id:s.topic.postStream.firstPostId})}));break;case"reassign":t.assign(this.topic,{targetType:"Topic",isAssigned:this.topic.isAssigned()}).set("model.onSuccess",(function(){s.appEvents.trigger("post-stream:refresh",{id:s.topic.postStream.firstPostId})}))}}},noneItem:function(){var e=this.get("topic.assigned_to_user"),t=this.get("topic.assigned_to_group"),n=p.default.t("discourse_assign.unassign.title_w_ellipsis"),i=p.default.t("discourse_assign.unassign.title");return e?{id:null,name:p.default.t("discourse_assign.reassign_modal.title"),label:(0,l.htmlSafe)("".concat((0,s.renderAvatar)(e,{imageSize:"tiny",ignoreTitle:!0}),'<span class="unassign-label">').concat(n,"</span>"))}:t?{id:null,name:p.default.t("discourse_assign.reassign_modal.title"),label:(0,l.htmlSafe)('<span class="unassign-label">'.concat(i,"</span> @").concat(t.name,"..."))}:void 0},dependentKeys:y,classNames:["reassign"],content:function(){var e,s,t,n=[{id:"unassign",name:p.default.t("discourse_assign.unassign.help",{username:(null===(e=this.topic.assigned_to_user)||void 0===e?void 0:e.username)||(null===(s=this.topic.assigned_to_group)||void 0===s?void 0:s.name)}),label:(0,l.htmlSafe)("".concat((0,i.iconHTML)("user-times")," ").concat(p.default.t("discourse_assign.unassign.title")))}];return this.topic.isAssigned()&&(null===(t=this.get("topic.assigned_to_user"))||void 0===t?void 0:t.username)!==this.currentUser.username&&n.push({id:"reassign-self",name:p.default.t("discourse_assign.reassign.to_self_help"),label:(0,l.htmlSafe)("".concat((0,i.iconHTML)("user-plus")," ").concat(p.default.t("discourse_assign.reassign.to_self")))}),n.push({id:"reassign",name:p.default.t("discourse_assign.reassign.help"),label:(0,l.htmlSafe)("".concat((0,i.iconHTML)("group-plus")," ").concat(p.default.t("discourse_assign.reassign.title_w_ellipsis")))}),n},displayed:function(){return!this.site.mobileView&&this.topic.isAssigned()}}),e.registerTopicFooterButton({id:"assign",icon:function(){return this.topic.isAssigned()?this.site.mobileView?"user-times":null:"user-plus"},priority:250,translatedTitle:function(){return P(this)},translatedAriaLabel:function(){return P(this)},translatedLabel:function(){return p.default.t("discourse_assign.assign.title")},action:function(){var e=this;if(this.get("currentUser.can_assign")){var s=(0,o.getOwner)(this).lookup("service:task-actions");this.topic.isAssigned()?(this.set("topic.assigned_to_user",null),this.set("topic.assigned_to_group",null),s.unassign(this.topic.id,"Topic").then((function(){e.appEvents.trigger("post-stream:refresh",{id:e.topic.postStream.firstPostId})}))):s.assign(this.topic).set("model.onSuccess",(function(){e.appEvents.trigger("post-stream:refresh",{id:e.topic.postStream.firstPostId})}))}},dropdown:function(){return this.site.mobileView},classNames:["assign"],dependentKeys:y,displayed:function(){var e;return(null===(e=this.currentUser)||void 0===e?void 0:e.can_assign)&&!this.topic.isAssigned()}}),e.registerTopicFooterButton({id:"unassign-mobile-header",translatedTitle:function(){return P(this)},translatedAriaLabel:function(){return P(this)},translatedLabel:function(){var e=this.get("topic.assigned_to_user"),t=this.get("topic.assigned_to_group"),n=p.default.t("discourse_assign.assigned_to_w_ellipsis");return e?(0,l.htmlSafe)('<span class="unassign-label"><span class="text">'.concat(n,'</span><span class="username">').concat(e.username,"</span></span>").concat((0,s.renderAvatar)(e,{imageSize:"small",ignoreTitle:!0}))):t?(0,l.htmlSafe)('<span class="unassign-label">'.concat(n,"</span> @").concat(t.name)):void 0},dropdown:function(){var e;return(null===(e=this.currentUser)||void 0===e?void 0:e.can_assign)&&this.topic.isAssigned()},classNames:["assign"],dependentKeys:y,displayed:function(){var e;return(null===(e=this.currentUser)||void 0===e?void 0:e.can_assign)&&this.site.mobileView}}),e.registerTopicFooterButton({id:"unassign-mobile",icon:function(){return"user-times"},translatedTitle:function(){return P(this)},translatedAriaLabel:function(){return P(this)},translatedLabel:function(){var e=p.default.t("discourse_assign.unassign.title");return(0,l.htmlSafe)('<span class="unassign-label"><span class="text">'.concat(e,"</span></span>"))},action:function(){var e=this;if(this.get("currentUser.can_assign")){var s=(0,o.getOwner)(this).lookup("service:task-actions");this.set("topic.assigned_to_user",null),this.set("topic.assigned_to_group",null),s.unassign(this.topic.id).then((function(){e.appEvents.trigger("post-stream:refresh",{id:e.topic.postStream.firstPostId})}))}},dropdown:function(){var e;return(null===(e=this.currentUser)||void 0===e?void 0:e.can_assign)&&this.topic.isAssigned()},classNames:["assign"],dependentKeys:y,displayed:function(){var e;return(null===(e=this.currentUser)||void 0===e?void 0:e.can_assign)&&this.site.mobileView&&this.topic.isAssigned()}}),e.registerTopicFooterButton({id:"reassign-self-mobile",icon:function(){return"user-plus"},translatedTitle:function(){return p.default.t("discourse_assign.reassign.to_self_help")},translatedAriaLabel:function(){return p.default.t("discourse_assign.reassign.to_self_help")},translatedLabel:function(){var e=p.default.t("discourse_assign.reassign.to_self");return(0,l.htmlSafe)('<span class="unassign-label"><span class="text">'.concat(e,"</span></span>"))},action:function(){var e=this;if(this.get("currentUser.can_assign")){var s=(0,o.getOwner)(this).lookup("service:task-actions");this.set("topic.assigned_to_user",null),this.set("topic.assigned_to_group",null),s.reassignUserToTopic(this.currentUser,this.topic).then((function(){e.appEvents.trigger("post-stream:refresh",{id:e.topic.postStream.firstPostId})}))}},dropdown:function(){var e;return(null===(e=this.currentUser)||void 0===e?void 0:e.can_assign)&&this.topic.isAssigned()},classNames:["assign"],dependentKeys:y,displayed:function(){var e,s;return this.site.mobileView&&(null===(e=this.currentUser)||void 0===e?void 0:e.can_assign)&&this.topic.isAssigned()&&(null===(s=this.get("topic.assigned_to_user"))||void 0===s?void 0:s.username)!==this.currentUser.username}}),e.registerTopicFooterButton({id:"reassign-mobile",icon:function(){return"group-plus"},translatedTitle:function(){return p.default.t("discourse_assign.reassign.help")},translatedAriaLabel:function(){return p.default.t("discourse_assign.reassign.help")},translatedLabel:function(){var e=p.default.t("discourse_assign.reassign.title_w_ellipsis");return(0,l.htmlSafe)('<span class="unassign-label"><span class="text">'.concat(e,"</span></span>"))},action:function(){var e=this;this.get("currentUser.can_assign")&&(0,o.getOwner)(this).lookup("service:task-actions").assign(this.topic,{targetType:"Topic",isAssigned:this.topic.isAssigned()}).set("model.onSuccess",(function(){e.appEvents.trigger("post-stream:refresh",{id:e.topic.postStream.firstPostId})}))},dropdown:function(){var e;return(null===(e=this.currentUser)||void 0===e?void 0:e.can_assign)&&this.topic.isAssigned()},classNames:["assign"],dependentKeys:y,displayed:function(){var e;return(null===(e=this.currentUser)||void 0===e?void 0:e.can_assign)&&this.site.mobileView}})}(e)})),(0,t.withPluginApi)("0.11.7",(function(e){e.addSearchSuggestion("in:assigned"),e.addSearchSuggestion("in:unassigned")})),(0,t.withPluginApi)("0.12.2",(function(e){e.addGroupPostSmallActionCode("assigned_group"),e.addGroupPostSmallActionCode("unassigned_group"),e.addGroupPostSmallActionCode("assigned_to_post"),e.addGroupPostSmallActionCode("assigned_group_to_post"),e.addGroupPostSmallActionCode("unassigned_from_post"),e.addGroupPostSmallActionCode("unassigned_group_from_post")})),(0,t.withPluginApi)("0.12.3",(function(e){e.addUserSearchOption("assignableGroups")}))}}};e.default=j})),define("discourse/plugins/discourse-assign/discourse-assign/pre-initializers/extend-category-for-assign",["exports","discourse/models/category","@ember/object"],(function(e,s,t){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;var n={name:"extend-category-for-assign",before:"inject-discourse-objects",initialize:function(){s.default.reopen({enable_unassigned_filter:(0,t.computed)("custom_fields.enable_unassigned_filter",{get:function(){var e;return"true"===(null==this||null===(e=this.custom_fields)||void 0===e?void 0:e.enable_unassigned_filter)}})})}};e.default=n})),define("discourse/plugins/discourse-assign/discourse-assign/routes/group-assigned-show",["exports","discourse/routes/discourse","discourse/lib/cached-topic-list"],(function(e,s,t){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;var n=s.default.extend({beforeModel:function(e){e.hasOwnProperty("from")&&e.from&&"show"===e.from.localName&&this.session.set("topicListScrollPosition",1)},model:function(e){var s=null;s=["everyone",this.modelFor("group").get("name")].includes(e.filter)?"topics/group-topics-assigned/".concat(this.modelFor("group").get("name")):"topics/messages-assigned/".concat(e.filter);var n=(0,t.findOrResetCachedTopicList)(this.session,s);return n||this.store.findFiltered("topicList",{filter:s,params:{order:e.order,ascending:e.ascending,search:e.search,direct:"everyone"!==e.filter}})},setupController:function(e,s){e.setProperties({model:s,search:this.currentModel.params.search})},renderTemplate:function(){this.render("group-topics-list")}});e.default=n})),define("discourse/plugins/discourse-assign/discourse-assign/routes/group-assigned",["exports","discourse/routes/discourse","discourse/lib/ajax","@ember/object"],(function(e,s,t,n){"use strict";var i;Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;var a,r,o,l,u,c,d=s.default.extend((a=i={model:function(){return(0,t.ajax)("/assign/members/".concat(this.modelFor("group").get("name")))},setupController:function(e,s){e.setProperties({model:s,members:[],group:this.modelFor("group")}),e.group.setProperties({assignment_count:s.assignment_count,group_assignment_count:s.group_assignment_count}),e.findMembers(!0)},redirect:function(e,s){s.to.params.hasOwnProperty("filter")?this.transitionTo("group.assigned.show",s.to.params.filter):this.transitionTo("group.assigned.show","everyone")},changeAssigned:function(){this.refresh()}},r="changeAssigned",o=[n.action],l=Object.getOwnPropertyDescriptor(i,"changeAssigned"),u=i,c={},Object.keys(l).forEach((function(e){c[e]=l[e]})),c.enumerable=!!c.enumerable,c.configurable=!!c.configurable,("value"in c||c.initializer)&&(c.writable=!0),c=o.slice().reverse().reduce((function(e,s){return s(a,r,e)||e}),c),u&&void 0!==c.initializer&&(c.value=c.initializer?c.initializer.call(u):void 0,c.initializer=void 0),void 0===c.initializer&&(Object.defineProperty(a,r,c),c=null),i));e.default=d})),define("discourse/plugins/discourse-assign/discourse-assign/routes/user-activity-assigned",["exports","I18n","discourse/routes/user-topic-list","discourse/lib/cookie","@ember/object"],(function(e,s,t,n,i){"use strict";var a;Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;var r,o,l,u,c,d,g=t.default.extend((r=a={userActionType:16,noContentHelpKey:"discourse_assigns.no_assigns",beforeModel:function(){void 0===this.currentUser&&((0,n.default)("destination_url",window.location.href),this.transitionTo("login"))},model:function(e){return this.store.findFiltered("topicList",{filter:"topics/messages-assigned/".concat(this.modelFor("user").get("username_lower")),params:{exclude_category_ids:[-1],order:e.order,ascending:e.ascending,search:e.search}})},titleToken:function(){return s.default.t("discourse_assign.assigned")},renderTemplate:function(){this.render("user-activity-assigned"),this.render("user-assigned-topics",{into:"user-activity-assigned"})},setupController:function(e,s){this._super(e,s),e.set("model",s)},changeAssigned:function(){this.refresh()}},o="changeAssigned",l=[i.action],u=Object.getOwnPropertyDescriptor(a,"changeAssigned"),c=a,d={},Object.keys(u).forEach((function(e){d[e]=u[e]})),d.enumerable=!!d.enumerable,d.configurable=!!d.configurable,("value"in d||d.initializer)&&(d.writable=!0),d=l.slice().reverse().reduce((function(e,s){return s(r,o,e)||e}),d),c&&void 0!==d.initializer&&(d.value=d.initializer?d.initializer.call(c):void 0,d.initializer=void 0),void 0===d.initializer&&(Object.defineProperty(r,o,d),d=null),a));e.default=g})),define("discourse/plugins/discourse-assign/discourse-assign/routes/user-private-messages-assigned",["exports","discourse/routes/build-private-messages-route"],(function(e,s){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;var t=(0,s.default)("assigned","private-messages-assigned","assigned");e.default=t})),define("discourse/plugins/discourse-assign/discourse/components/assign-actions-dropdown",["exports","I18n","select-kit/components/dropdown-select-box","@ember/object"],(function(e,s,t,n){"use strict";var i;function a(e,s){return function(e){if(Array.isArray(e))return e}(e)||function(e,s){if("undefined"==typeof Symbol||!(Symbol.iterator in Object(e)))return;var t=[],n=!0,i=!1,a=void 0;try{for(var r,o=e[Symbol.iterator]();!(n=(r=o.next()).done)&&(t.push(r.value),!s||t.length!==s);n=!0);}catch(e){i=!0,a=e}finally{try{n||null==o.return||o.return()}finally{if(i)throw a}}return t}(e,s)||function(e,s){if(!e)return;if("string"==typeof e)return r(e,s);var t=Object.prototype.toString.call(e).slice(8,-1);"Object"===t&&e.constructor&&(t=e.constructor.name);if("Map"===t||"Set"===t)return Array.from(e);if("Arguments"===t||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(t))return r(e,s)}(e,s)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function r(e,s){(null==s||s>e.length)&&(s=e.length);for(var t=0,n=new Array(s);t<s;t++)n[t]=e[t];return n}Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;var o,l,u,c,d,g,p=t.default.extend((o=i={classNames:["assign-actions-dropdown"],headerIcon:null,title:"...",allowInitialValueMutation:!1,showFullTitle:!0,computeContent:function(){var e=[];return this.assignee&&(e=e.concat([{id:"unassign",icon:this.group?"group-times":"user-times",name:s.default.t("discourse_assign.unassign.title"),description:s.default.t("discourse_assign.unassign.help",{username:this.assignee})},{id:"reassign",icon:"users",name:s.default.t("discourse_assign.reassign.title"),description:s.default.t("discourse_assign.reassign.help")}])),this.topic.indirectly_assigned_to&&Object.entries(this.topic.indirectly_assigned_to).forEach((function(t){var n=a(t,2),i=n[0],r=n[1].assigned_to;e=e.concat({id:"unassign_post_".concat(i),icon:r.username?"user-times":"group-times",name:s.default.t("discourse_assign.unassign_post.title"),description:s.default.t("discourse_assign.unassign_post.help",{username:r.username||r.name})})})),e},onSelect:function(e){var s;switch(e){case"unassign":this.unassign(this.topic.id);break;case"reassign":this.reassign(this.topic,this.assignee)}var t=null===(s=e.match(/unassign_post_(\d+)/))||void 0===s?void 0:s[1];t&&this.unassign(t,"Post")}},l="onSelect",u=[n.action],c=Object.getOwnPropertyDescriptor(i,"onSelect"),d=i,g={},Object.keys(c).forEach((function(e){g[e]=c[e]})),g.enumerable=!!g.enumerable,g.configurable=!!g.configurable,("value"in g||g.initializer)&&(g.writable=!0),g=u.slice().reverse().reduce((function(e,s){return s(o,l,e)||e}),g),d&&void 0!==g.initializer&&(g.value=g.initializer?g.initializer.call(d):void 0,g.initializer=void 0),void 0===g.initializer&&(Object.defineProperty(o,l,g),g=null),i));e.default=p})),define("discourse/plugins/discourse-assign/discourse/components/assigned-to",["exports","@ember/component"],(function(e,s){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;var t=s.default.extend({classNames:["assigned-to-user"]});e.default=t})),define("discourse/plugins/discourse-assign/discourse/components/assigned-topic-list-item",["exports","discourse/components/topic-list-item","@ember/object/computed"],(function(e,s,t){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;var n=s.default.extend({classNames:["assigned-topic-list-item"],isPrivateMessage:(0,t.equal)("topic.archetype","private_message")});e.default=n})),define("discourse/plugins/discourse-assign/discourse/components/assigned-topic-list",["exports","discourse/components/topic-list"],(function(e,s){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;var t=s.default;e.default=t})),define("discourse/plugins/discourse-assign/discourse/components/basic-assigned-topic-list",["exports","discourse/components/basic-topic-list"],(function(e,s){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;var t=s.default;e.default=t})),define("discourse/plugins/discourse-assign/discourse/components/flagged-topic-listener",["exports","@ember/component","@ember/object"],(function(e,s,t){"use strict";function n(e,s){e&&e.id===s.topic_id&&(0,t.set)(e,"assigned_to_user",s.assigned_to)}Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;var i=s.default.extend({didInsertElement:function(){var e=this;this._super(),this.messageBus.subscribe("/staff/topic-assignment",(function(s){var t=e.flaggedTopics;t?t.forEach((function(e){return n(e.topic,s)})):n(e.topic,s)}))},willDestroyElement:function(){this._super(),this.messageBus.unsubscribe("/staff/topic-assignment")}});e.default=i})),define("discourse/plugins/discourse-assign/discourse/components/group-assigned-filter",["exports","@ember/component"],(function(e,s){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;var t=s.default.extend({tagName:"li"});e.default=t})),define("discourse/plugins/discourse-assign/discourse/components/group-assigned-menu-item",["exports","@ember/component"],(function(e,s){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;var t=s.default.extend({tagName:""});e.default=t})),define("discourse/plugins/discourse-assign/discourse/components/remind-assigns-frequency",["exports","@ember/component","I18n","discourse-common/utils/decorators"],(function(e,s,t,n){"use strict";var i,a,r;function o(e,s,t,n,i){var a={};return Object.keys(n).forEach((function(e){a[e]=n[e]})),a.enumerable=!!a.enumerable,a.configurable=!!a.configurable,("value"in a||a.initializer)&&(a.writable=!0),a=t.slice().reverse().reduce((function(t,n){return n(e,s,t)||t}),a),i&&void 0!==a.initializer&&(a.value=a.initializer?a.initializer.call(i):void 0,a.initializer=void 0),void 0===a.initializer&&(Object.defineProperty(e,s,a),a=null),a}Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;var l=s.default.extend((i=(0,n.default)("user.custom_fields.remind_assigns_frequency","siteSettings.remind_assigns_frequency"),a=(0,n.default)("user.reminders_frequency"),o(r={selectedFrequency:function(e,s){return this.availableFrequencies.map((function(e){return e.value})).includes(e)?e:s},availableFrequencies:function(e){return e.map((function(e){return{name:t.default.t(e.name),value:e.value,selected:!1}}))}},"selectedFrequency",[i],Object.getOwnPropertyDescriptor(r,"selectedFrequency"),r),o(r,"availableFrequencies",[a],Object.getOwnPropertyDescriptor(r,"availableFrequencies"),r),r));e.default=l})),define("discourse/plugins/discourse-assign/discourse/services/task-actions",["exports","@ember/service","discourse/lib/ajax","discourse/lib/show-modal"],(function(e,s,t,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;var i=s.default.extend({i18nSuffix:function(e){switch(e){case"Post":return"_post_modal";case"Topic":return"_modal"}},unassign:function(e){var s=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"Topic";return(0,t.ajax)("/assign/unassign",{type:"PUT",data:{target_id:e,target_type:s}})},assign:function(e){var s,t,i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{isAssigned:!1,targetType:"Topic"};return(0,n.default)("assign-user",{title:"discourse_assign.assign"+this.i18nSuffix(i.targetType)+".".concat(i.isAssigned?"reassign_title":"title"),model:{description:"discourse_assign.".concat(i.isAssigned?"reassign":"assign")+this.i18nSuffix(i.targetType)+".description",reassign:i.isAssigned,username:null===(s=e.assigned_to_user)||void 0===s?void 0:s.username,group_name:null===(t=e.assigned_to_group)||void 0===t?void 0:t.name,target:e,targetType:i.targetType}})},reassignUserToTopic:function(e,s){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"Topic";return(0,t.ajax)("/assign/assign",{type:"PUT",data:{username:e.username,target_id:s.id,target_type:n}})}});e.default=i})),Ember.TEMPLATES["javascripts/components/assigned-to"]=Ember.HTMLBars.template({id:null,block:'{"symbols":["&default"],"statements":[[1,[28,"avatar",[[24,["user"]]],[["imageSize"],["small"]]],false],[0,"\\n"],[7,"span",true],[10,"class","assigned-username"],[8],[0,"\\n  "],[1,[24,["user","username"]],false],[0,"\\n"],[9],[0,"\\n"],[14,1],[0,"\\n"]],"hasEval":false}',meta:{moduleName:"javascripts/discourse/templates/components/assigned-to"}}),Ember.TEMPLATES["javascripts/components/assigned-topic-list-item"]=Ember.HTMLBars.template({id:null,block:'{"symbols":[],"statements":[[4,"if",[[24,["bulkSelectEnabled"]]],null,{"statements":[[0,"  "],[7,"td",true],[10,"class","bulk-select topic-list-data"],[8],[0,"\\n    "],[7,"input",true],[10,"class","bulk-select"],[10,"type","checkbox"],[8],[9],[0,"\\n  "],[9],[0,"\\n"]],"parameters":[]},null],[7,"td",true],[10,"class","main-link clearfix topic-list-data"],[10,"colspan","1"],[8],[0,"\\n  "],[7,"span",true],[10,"class","link-top-line"],[8],[1,[28,"raw",["topic-status"],[["topic"],[[24,["topic"]]]]],false],[4,"if",[[24,["isPrivateMessage"]]],null,{"statements":[[1,[28,"d-icon",["envelope"],[["class"],["private-message-icon"]]],false]],"parameters":[]},null],[1,[28,"topic-link",[[24,["topic"]]],[["class"],["raw-link raw-topic-link"]]],false],[4,"if",[[24,["topic","featured_link"]]],null,{"statements":[[1,[28,"topic-featured-link",[[24,["topic"]]],null],false]],"parameters":[]},null],[4,"if",[[24,["showTopicPostBadges"]]],null,{"statements":[[1,[28,"raw",["topic-post-badges"],[["unread","unseen","url","newDotText"],[[24,["topic","unread"]],[24,["topic","unseen"]],[24,["topic","lastUnreadUrl"]],[24,["newDotText"]]]]],false]],"parameters":[]},null],[0,"  "],[9],[0,"\\n  "],[7,"div",true],[10,"class","link-bottom-line"],[8],[0,"\\n"],[4,"unless",[[24,["hideCategory"]]],null,{"statements":[[4,"unless",[[24,["topic","isPinnedUncategorized"]]],null,{"statements":[[0,"        "],[1,[28,"category-link",[[24,["topic","category"]]],null],false],[0,"\\n"]],"parameters":[]},null]],"parameters":[]},null],[0,"    "],[1,[28,"discourse-tags",[[24,["topic"]]],[["mode","tagsForUser"],["list",[24,["tagsForUser"]]]]],false],[0,"\\n    "],[1,[28,"raw",["list/action-list"],[["topic","postNumbers","className","icon"],[[24,["topic"]],[24,["topic","liked_post_numbers"]],"likes","heart"]]],false],[0,"\\n  "],[9],[0,"\\n"],[4,"if",[[24,["expandPinned"]]],null,{"statements":[[0,"    "],[1,[28,"raw",["list/topic-excerpt"],[["topic"],[[24,["topic"]]]]],false],[0,"\\n"]],"parameters":[]},null],[9],[0,"\\n\\n"],[4,"if",[[24,["showPosters"]]],null,{"statements":[[0,"  "],[1,[28,"raw",["list/posters-column"],[["posters"],[[24,["topic","featuredUsers"]]]]],false],[0,"\\n"]],"parameters":[]},null],[0,"\\n"],[1,[28,"raw",["list/posts-count-column"],[["topic"],[[24,["topic"]]]]],false],[0,"\\n\\n"],[7,"td",true],[11,"class",[29,["num views ",[24,["topic","viewsHeat"]]," topic-list-data"]]],[8],[1,[28,"number",[[24,["topic","views"]]],[["numberKey"],["views_long"]]],false],[9],[0,"\\n"],[1,[28,"raw",["list/activity-column"],[["topic","class","tagName"],[[24,["topic"]],"num topic-list-data","td"]]],false],[0,"\\n"],[7,"td",true],[10,"class","topic-list-data"],[8],[0,"\\n"],[4,"if",[[24,["topic","assigned_to_user"]]],null,{"statements":[[0,"    "],[1,[28,"assign-actions-dropdown",null,[["topic","assignee","unassign","reassign"],[[24,["topic"]],[24,["topic","assigned_to_user","username"]],[24,["unassign"]],[24,["reassign"]]]]],false],[0,"\\n"]],"parameters":[]},{"statements":[[4,"if",[[24,["topic","assigned_to_group"]]],null,{"statements":[[0,"    "],[1,[28,"assign-actions-dropdown",null,[["topic","assignee","group","unassign","reassign"],[[24,["topic"]],[24,["topic","assigned_to_group","name"]],true,[24,["unassign"]],[24,["reassign"]]]]],false],[0,"\\n"]],"parameters":[]},{"statements":[[0,"    "],[1,[28,"assign-actions-dropdown",null,[["topic","unassign"],[[24,["topic"]],[24,["unassign"]]]]],false],[0,"\\n  "]],"parameters":[]}]],"parameters":[]}],[9],[0,"\\n"]],"hasEval":false}',meta:{moduleName:"javascripts/discourse/templates/components/assigned-topic-list-item"}}),Ember.TEMPLATES["javascripts/components/assigned-topic-list"]=Ember.HTMLBars.template({id:null,block:'{"symbols":["topic"],"statements":[[4,"unless",[[24,["skipHeader"]]],null,{"statements":[[0,"  "],[7,"thead",true],[10,"class","topic-list-header assigned-topic-list-header"],[8],[0,"\\n    "],[1,[28,"raw",["topic-list-header"],[["canBulkSelect","canDoBulkActions","toggleInTitle","hideCategory","showPosters","showLikes","showOpLikes","order","ascending","sortable","listTitle","bulkSelectEnabled"],[[24,["canBulkSelect"]],[24,["canDoBulkActions"]],[24,["toggleInTitle"]],[24,["hideCategory"]],[24,["showPosters"]],[24,["showLikes"]],[24,["showOpLikes"]],[24,["order"]],[24,["ascending"]],[24,["sortable"]],[24,["listTitle"]],[24,["bulkSelectEnabled"]]]]],false],[0,"\\n  "],[9],[0,"\\n"]],"parameters":[]},null],[0,"\\n"],[7,"tbody",true],[10,"class","topic-list-body assigned-topic-list-body"],[8],[0,"\\n"],[4,"each",[[24,["filteredTopics"]]],null,{"statements":[[0,"    "],[1,[28,"assigned-topic-list-item",null,[["topic","bulkSelectEnabled","showTopicPostBadges","hideCategory","showPosters","showLikes","showOpLikes","expandGloballyPinned","expandAllPinned","lastVisitedTopic","selected","tagsForUser","unassign","reassign"],[[23,1,[]],[24,["bulkSelectEnabled"]],[24,["showTopicPostBadges"]],[24,["hideCategory"]],[24,["showPosters"]],[24,["showLikes"]],[24,["showOpLikes"]],[24,["expandGloballyPinned"]],[24,["expandAllPinned"]],[24,["lastVisitedTopic"]],[24,["selected"]],[24,["tagsForUser"]],[24,["unassign"]],[24,["reassign"]]]]],false],[0,"\\n\\n    "],[1,[28,"raw",["list/visited-line"],[["lastVisitedTopic","topic"],[[24,["lastVisitedTopic"]],[23,1,[]]]]],false],[0,"\\n"]],"parameters":[1]},null],[9],[0,"\\n"]],"hasEval":false}',meta:{moduleName:"javascripts/discourse/templates/components/assigned-topic-list"}}),Ember.TEMPLATES["javascripts/components/basic-assigned-topic-list"]=Ember.HTMLBars.template({id:null,block:'{"symbols":[],"statements":[[4,"conditional-loading-spinner",null,[["condition"],[[24,["loading"]]]],{"statements":[[4,"if",[[24,["hasIncoming"]]],null,{"statements":[[0,"    "],[7,"div",true],[10,"class","show-mores"],[8],[0,"\\n      "],[7,"a",false],[12,"href",""],[12,"class","alert alert-info clickable"],[3,"action",[[23,0,[]],[24,["showInserted"]]]],[8],[0,"\\n        "],[1,[28,"count-i18n",null,[["key","suffix","count"],["topic_count_","latest",[24,["incomingCount"]]]]],false],[0,"\\n      "],[9],[0,"\\n    "],[9],[0,"\\n"]],"parameters":[]},null],[0,"\\n"],[4,"if",[[24,["topics"]]],null,{"statements":[[0,"    "],[1,[28,"assigned-topic-list",null,[["showPosters","hideCategory","topics","expandExcerpts","bulkSelectEnabled","canBulkSelect","bulkSelectAction","selected","skipHeader","tagsForUser","changeSort","toggleBulkSelect","unassign","reassign","onScroll","scrollOnLoad"],[[24,["showPosters"]],[24,["hideCategory"]],[24,["topics"]],[24,["expandExcerpts"]],[24,["bulkSelectEnabled"]],[24,["canBulkSelect"]],[24,["bulkSelectAction"]],[24,["selected"]],[24,["skipHeader"]],[24,["tagsForUser"]],[24,["changeSort"]],[24,["toggleBulkSelect"]],[24,["unassign"]],[24,["reassign"]],[24,["onScroll"]],[24,["scrollOnLoad"]]]]],false],[0,"\\n"]],"parameters":[]},{"statements":[[4,"unless",[[24,["loadingMore"]]],null,{"statements":[[0,"      "],[7,"div",true],[10,"class","alert alert-info"],[8],[0,"\\n        "],[1,[28,"i18n",["choose_topic.none_found"],null],false],[0,"\\n      "],[9],[0,"\\n"]],"parameters":[]},null]],"parameters":[]}]],"parameters":[]},null]],"hasEval":false}',meta:{moduleName:"javascripts/discourse/templates/components/basic-assigned-topic-list"}}),Ember.TEMPLATES["javascripts/components/group-assigned-filter"]=Ember.HTMLBars.template({id:null,block:'{"symbols":[],"statements":[[4,"if",[[24,["showAvatar"]]],null,{"statements":[[4,"link-to",null,[["query","route","model"],[[28,"hash",null,[["order","ascending","search"],[[24,["order"]],[24,["ascending"]],[24,["search"]]]]],"group.assigned.show",[24,["filter","username_lower"]]]],{"statements":[[0,"    "],[7,"div",true],[10,"class","assign-image"],[8],[0,"\\n      "],[7,"a",true],[11,"href",[24,["filter","userPath"]]],[11,"data-user-card",[24,["filter","username"]]],[8],[1,[28,"avatar",[[24,["filter"]]],[["imageSize"],["large"]]],false],[9],[0,"\\n    "],[9],[0,"\\n\\n    "],[7,"div",true],[10,"class","assign-names"],[8],[0,"\\n      "],[7,"div",true],[10,"class","assign-username"],[8],[1,[28,"format-username",[[24,["filter","username"]]],null],false],[9],[0,"\\n      "],[7,"div",true],[10,"class","assign-name"],[8],[1,[24,["filter","name"]],false],[9],[0,"\\n    "],[9],[0,"\\n\\n    "],[7,"div",true],[10,"class","assign-count"],[8],[0,"\\n      "],[1,[24,["filter","assignments_count"]],false],[0,"\\n    "],[9],[0,"\\n"]],"parameters":[]},null]],"parameters":[]},{"statements":[[4,"if",[[24,["groupName"]]],null,{"statements":[[4,"link-to",null,[["query","route","model"],[[28,"hash",null,[["order","ascending","search"],[[24,["order"]],[24,["ascending"]],[24,["search"]]]]],"group.assigned.show",[24,["filter"]]]],{"statements":[[0,"    "],[7,"div",true],[10,"class","assign-image"],[8],[0,"\\n      "],[1,[28,"d-icon",["group-plus"],null],false],[0,"\\n    "],[9],[0,"\\n    "],[7,"div",true],[10,"class","assign-names"],[8],[0,"\\n      "],[7,"div",true],[10,"class","assign-username"],[8],[1,[22,"groupName"],false],[9],[0,"\\n    "],[9],[0,"\\n\\n    "],[7,"div",true],[10,"class","assign-count"],[8],[0,"\\n      "],[1,[22,"assignmentCount"],false],[0,"\\n    "],[9],[0,"\\n"]],"parameters":[]},null]],"parameters":[]},{"statements":[[4,"link-to",null,[["query","route","model"],[[28,"hash",null,[["order","ascending","search"],[[24,["order"]],[24,["ascending"]],[24,["search"]]]]],"group.assigned.show",[24,["filter"]]]],{"statements":[[0,"    "],[7,"div",true],[10,"class","assign-everyone"],[8],[0,"\\n      "],[1,[28,"i18n",["discourse_assign.group_everyone"],null],false],[0,"\\n    "],[9],[0,"\\n    "],[7,"div",true],[10,"class","assign-count"],[8],[0,"\\n      "],[1,[22,"assignmentCount"],false],[0,"\\n    "],[9],[0,"\\n"]],"parameters":[]},null]],"parameters":[]}]],"parameters":[]}]],"hasEval":false}',meta:{moduleName:"javascripts/discourse/templates/components/group-assigned-filter"}}),Ember.TEMPLATES["javascripts/components/group-assigned-menu-item"]=Ember.HTMLBars.template({id:null,block:'{"symbols":[],"statements":[[4,"link-to",null,[["route"],["group.assigned"]],{"statements":[[0,"  "],[1,[28,"d-icon",["user-plus"],[["class"],["glyph"]]],false],[1,[28,"i18n",["discourse_assign.assigned"],null],false],[0," ("],[1,[24,["group","assignment_count"]],false],[0,")\\n"]],"parameters":[]},null]],"hasEval":false}',meta:{moduleName:"javascripts/discourse/templates/components/group-assigned-menu-item"}}),Ember.TEMPLATES["javascripts/components/remind-assigns-frequency"]=Ember.HTMLBars.template({id:null,block:'{"symbols":[],"statements":[[4,"if",[[24,["siteSettings","assign_enabled"]]],null,{"statements":[[0,"  "],[7,"div",true],[10,"class","controls controls-dropdown"],[8],[0,"\\n    "],[7,"label",true],[8],[1,[28,"i18n",["discourse_assign.reminders_frequency.description"],null],false],[9],[0,"\\n    "],[1,[28,"combo-box",null,[["id","valueProperty","content","value","onChange"],["remind-assigns-frequency","value",[24,["availableFrequencies"]],[24,["selectedFrequency"]],[28,"action",[[23,0,[]],[28,"mut",[[24,["user","custom_fields","remind_assigns_frequency"]]],null]],null]]]],false],[0,"\\n  "],[9],[0,"\\n"]],"parameters":[]},null]],"hasEval":false}',meta:{moduleName:"javascripts/discourse/templates/components/remind-assigns-frequency"}}),Ember.TEMPLATES["javascripts/group-topics-list"]=Ember.HTMLBars.template({id:null,block:'{"symbols":[],"statements":[[7,"div",true],[10,"class","topic-search-div"],[8],[0,"\\n  "],[7,"div",true],[10,"class","inline-form full-width"],[8],[0,"\\n    "],[1,[28,"input",null,[["class","value","placeholder","input","autocomplete","type"],["no-blur",[28,"readonly",[[24,["search"]]],null],[28,"i18n",["discourse_assign.topic_search_placeholder"],null],[28,"action",[[23,0,[]],"onChangeFilter"],[["value"],["target.value"]]],"off","search"]]],false],[0,"\\n  "],[9],[0,"\\n"],[9],[0,"\\n"],[4,"load-more",null,[["class","selector","action"],["paginated-topics-list",".paginated-topics-list .topic-list tr",[28,"action",[[23,0,[]],"loadMore"],null]]],{"statements":[[0,"\\n  "],[1,[28,"basic-assigned-topic-list",null,[["topicList","hideCategory","showPosters","bulkSelectEnabled","canBulkSelect","selected","hasIncoming","incomingCount","showInserted","tagsForUser","changeSort","toggleBulkSelect","bulkSelectAction","unassign","reassign","onScroll","scrollOnLoad"],[[24,["model"]],[24,["hideCategory"]],[24,["showPosters"]],[24,["bulkSelectEnabled"]],[24,["canBulkSelect"]],[24,["selected"]],[24,["hasIncoming"]],[24,["incomingCount"]],[28,"action",[[23,0,[]],"showInserted"],null],[24,["tagsForUser"]],[28,"action",[[23,0,[]],"changeSort"],null],[28,"action",[[23,0,[]],"toggleBulkSelect"],null],[28,"action",[[23,0,[]],"refresh"],null],[28,"action",[[23,0,[]],"unassign"],null],[28,"action",[[23,0,[]],"reassign"],null],[24,["saveScrollPosition"]],true]]],false],[0,"\\n\\n  "],[1,[28,"conditional-loading-spinner",null,[["condition"],[[24,["model","loadingMore"]]]]],false],[0,"\\n"]],"parameters":[]},null]],"hasEval":false}',meta:{moduleName:"javascripts/discourse/templates/group-topics-list"}}),Ember.TEMPLATES["javascripts/group/assigned"]=Ember.HTMLBars.template({id:null,block:'{"symbols":["member"],"statements":[[7,"section",true],[10,"class","user-secondary-navigation group-assignments"],[8],[0,"\\n"],[4,"mobile-nav",null,[["class","desktopClass"],["activity-nav","action-list activity-list nav-stacked"]],{"statements":[[4,"if",[[24,["isDesktop"]]],null,{"statements":[[0,"      "],[7,"div",true],[10,"class","search-div"],[8],[0,"\\n        "],[1,[28,"input",null,[["type","placeholder","value","class","input"],["text",[28,"i18n",["discourse_assign.sidebar_name_filter_placeholder"],null],[28,"readonly",[[24,["filterName"]]],null],"search",[28,"action",[[23,0,[]],"onChangeFilterName"],[["value"],["target.value"]]]]]],false],[0,"\\n      "],[9],[0,"\\n"]],"parameters":[]},null],[4,"load-more",null,[["selector","action"],[".activity-nav li",[28,"action",[[23,0,[]],"loadMore"],null]]],{"statements":[[0,"      "],[1,[28,"group-assigned-filter",null,[["showAvatar","filter","routeType","assignmentCount","search","ascending","order"],[false,"everyone",[24,["route_type"]],[24,["group","assignment_count"]],[24,["search"]],[24,["ascending"]],[24,["order"]]]]],false],[0,"\\n      "],[1,[28,"group-assigned-filter",null,[["showAvatar","groupName","filter","routeType","assignmentCount","search","ascending","order"],[false,[24,["group","name"]],[24,["group","name"]],[24,["route_type"]],[24,["group","group_assignment_count"]],[24,["search"]],[24,["ascending"]],[24,["order"]]]]],false],[0,"\\n"],[4,"each",[[24,["members"]]],null,{"statements":[[0,"        "],[1,[28,"group-assigned-filter",null,[["showAvatar","filter","routeType","search","ascending","order"],[true,[23,1,[]],[24,["route_type"]],[24,["search"]],[24,["ascending"]],[24,["order"]]]]],false],[0,"\\n"]],"parameters":[1]},null],[0,"      "],[1,[28,"conditional-loading-spinner",null,[["condition"],[[24,["loading"]]]]],false],[0,"\\n"]],"parameters":[]},null]],"parameters":[]},null],[9],[0,"\\n"],[7,"section",true],[10,"class","user-content"],[8],[0,"\\n  "],[1,[22,"outlet"],false],[0,"\\n"],[9],[0,"\\n"]],"hasEval":false}',meta:{moduleName:"javascripts/discourse/templates/group/assigned"}}),Ember.TEMPLATES["javascripts/mobile/components/assigned-topic-list-item"]=Ember.HTMLBars.template({id:null,block:'{"symbols":[],"statements":[[7,"td",true],[10,"class","topic-list-data"],[8],[0,"\\n  "],[7,"div",true],[10,"class","main-link"],[8],[0,"\\n    "],[1,[28,"topic-status",null,[["topic"],[[24,["topic"]]]]],false],[4,"if",[[24,["isPrivateMessage"]]],null,{"statements":[[1,[28,"d-icon",["envelope"],[["class"],["private-message-icon"]]],false]],"parameters":[]},null],[1,[28,"topic-link",[[24,["topic"]]],null],false],[0,"\\n"],[4,"if",[[24,["topic","unseen"]]],null,{"statements":[[0,"      "],[7,"span",true],[10,"class","badge-notification new-topic"],[8],[9],[0,"\\n"]],"parameters":[]},null],[4,"if",[[24,["topic","hasExcerpt"]]],null,{"statements":[[0,"      "],[7,"div",true],[10,"class","topic-excerpt"],[8],[0,"\\n        "],[1,[28,"html-safe",[[24,["topic","excerpt"]]],null],false],[0,"\\n"],[4,"if",[[24,["topic","excerptTruncated"]]],null,{"statements":[[0,"          "],[4,"unless",[[24,["topic","canClearPin"]]],null,{"statements":[[7,"a",true],[11,"href",[24,["topic","url"]]],[8],[1,[28,"i18n",["read_more"],null],false],[9]],"parameters":[]},null],[0,"\\n"]],"parameters":[]},null],[4,"if",[[24,["topic","canClearPin"]]],null,{"statements":[[0,"          "],[7,"a",false],[12,"href",""],[12,"title",[28,"i18n",["topic.clear_pin.help"],null]],[3,"action",[[23,0,[]],"clearPin",[24,["topic"]]]],[8],[1,[28,"i18n",["topic.clear_pin.title"],null],false],[9],[0,"\\n"]],"parameters":[]},null],[0,"      "],[9],[0,"\\n"]],"parameters":[]},null],[0,"  "],[9],[0,"\\n  "],[7,"div",true],[10,"class","pull-right topic-list-num"],[8],[0,"\\n"],[4,"if",[[24,["topic","assigned_to_user"]]],null,{"statements":[[0,"      "],[1,[28,"assign-actions-dropdown",null,[["topic","assignee","unassign","reassign"],[[24,["topic"]],[24,["topic","assigned_to_user","username"]],[24,["unassign"]],[24,["reassign"]]]]],false],[0,"\\n"]],"parameters":[]},{"statements":[[4,"if",[[24,["topic","assigned_to_group"]]],null,{"statements":[[0,"      "],[1,[28,"assign-actions-dropdown",null,[["topic","assignee","group","unassign","reassign"],[[24,["topic"]],[24,["topic","assigned_to_group","name"]],true,[24,["unassign"]],[24,["reassign"]]]]],false],[0,"\\n"]],"parameters":[]},{"statements":[[0,"      "],[1,[28,"assign-actions-dropdown",null,[["topic","unassign"],[[24,["topic"]],[24,["unassign"]]]]],false],[0,"\\n    "]],"parameters":[]}]],"parameters":[]}],[0,"  "],[9],[0,"\\n  "],[7,"div",true],[10,"class","clearfix"],[8],[9],[0,"\\n  "],[7,"div",true],[10,"class","topic-item-stats clearfix"],[8],[0,"\\n    "],[1,[28,"discourse-tags",[[24,["topic"]]],[["mode","tagsForUser"],["list",[24,["tagsForUser"]]]]],false],[0,"\\n    "],[7,"div",true],[10,"class","pull-right topic-list-num"],[8],[0,"\\n      "],[1,[28,"raw",["list/activity-column"],[["topic","tagName","class"],[[24,["topic"]],"div","num activity last"]]],false],[0,"\\n      "],[7,"a",true],[11,"href",[24,["topic","lastPostUrl"]]],[11,"title",[29,[[28,"i18n",["last_post"],null],": ",[28,"html-safe",[[24,["raw-date"]],[24,["topic","bumped_at"]]],null]]]],[8],[1,[24,["topic","last_poster_username"]],false],[9],[0,"\\n    "],[9],[0,"\\n"],[4,"unless",[[24,["hideCategory"]]],null,{"statements":[[0,"      "],[7,"div",true],[10,"class","category"],[8],[0,"\\n        "],[1,[28,"category-link",[[24,["topic","category"]]],null],false],[0,"\\n      "],[9],[0,"\\n"]],"parameters":[]},null],[0,"    "],[7,"div",true],[10,"class","clearfix"],[8],[9],[0,"\\n  "],[9],[0,"\\n"],[9],[0,"\\n"]],"hasEval":false}',meta:{moduleName:"javascripts/discourse/templates/mobile/components/assigned-topic-list-item"}}),Ember.TEMPLATES["javascripts/mobile/components/basic-assigned-topic-list"]=Ember.HTMLBars.template({id:null,block:'{"symbols":["t"],"statements":[[4,"conditional-loading-spinner",null,[["condition"],[[24,["loading"]]]],{"statements":[[4,"if",[[24,["hasIncoming"]]],null,{"statements":[[0,"    "],[7,"div",true],[10,"class","show-mores"],[8],[0,"\\n      "],[7,"a",false],[12,"href",""],[12,"class","alert alert-info clickable"],[3,"action",[[23,0,[]],[24,["showInserted"]]]],[8],[0,"\\n        "],[1,[28,"count-i18n",null,[["key","suffix","count"],["topic_count_","latest",[24,["incomingCount"]]]]],false],[0,"\\n      "],[9],[0,"\\n    "],[9],[0,"\\n"]],"parameters":[]},null],[0,"\\n"],[4,"if",[[24,["topics"]]],null,{"statements":[[0,"    "],[7,"table",true],[10,"class","topic-list assigned-topic-list"],[8],[0,"\\n      "],[7,"tbody",true],[10,"class","topic-list-body assigned-topic-list-body"],[8],[0,"\\n"],[4,"each",[[24,["topics"]]],null,{"statements":[[0,"          "],[1,[28,"assigned-topic-list-item",null,[["topic","expandGloballyPinned","expandAllPinned","lastVisitedTopic","selected","tagsForUser","unassign","reassign"],[[23,1,[]],[24,["expandGloballyPinned"]],[24,["expandAllPinned"]],[24,["lastVisitedTopic"]],[24,["selected"]],[24,["tagsForUser"]],[24,["unassign"]],[24,["reassign"]]]]],false],[0,"\\n"]],"parameters":[1]},null],[0,"      "],[9],[0,"\\n    "],[9],[0,"\\n"]],"parameters":[]},{"statements":[[0,"    "],[7,"div",true],[10,"class","alert alert-info"],[8],[0,"\\n      "],[1,[28,"i18n",["choose_topic.none_found"],null],false],[0,"\\n    "],[9],[0,"\\n"]],"parameters":[]}]],"parameters":[]},null]],"hasEval":false}',meta:{moduleName:"javascripts/discourse/templates/mobile/components/basic-assigned-topic-list"}}),Ember.TEMPLATES["javascripts/modal/assign-user"]=Ember.HTMLBars.template({id:null,block:'{"symbols":["user"],"statements":[[4,"d-modal-body",null,[["class"],["assign"]],{"statements":[[0,"  "],[7,"div",true],[8],[0,"\\n    "],[7,"p",true],[8],[1,[28,"i18n",[[24,["model","description"]]],null],false],[9],[0,"\\n    "],[1,[28,"email-group-user-chooser",null,[["autocomplete","value","onChange","autofocus","options"],["off",[24,["assigneeName"]],[28,"action",[[23,0,[]],"assignUsername"],null],"autofocus",[28,"hash",null,[["mobilePlacementStrategy","filterPlaceholder","includeGroups","customSearchOptions","groupMembersOf","maximum","autofocus","tabindex"],["absolute",[24,["placeholderKey"]],true,[28,"hash",null,[["assignableGroups"],[true]]],[24,["allowedGroups"]],1,[24,["autofocus"]],1]]]]]],false],[0,"\\n    "],[7,"div",true],[10,"class","assign-suggestions"],[8],[0,"\\n"],[4,"each",[[24,["assignSuggestions"]]],null,{"statements":[[0,"        "],[7,"a",false],[12,"href",""],[3,"action",[[23,0,[]],"assignUser",[23,1,["username"]]]],[8],[0,"\\n          "],[1,[28,"avatar",[[23,1,[]]],[["imageSize"],["small"]]],false],[0,"\\n          "],[1,[28,"decorate-username-selector",[[23,1,["username"]]],null],false],[0,"\\n        "],[9],[0,"\\n"]],"parameters":[1]},null],[0,"    "],[9],[0,"\\n  "],[9],[0,"\\n"]],"parameters":[]},null],[0,"\\n"],[7,"div",true],[10,"class","modal-footer"],[8],[0,"\\n  "],[1,[28,"d-button",null,[["label","icon","action","class","disabled"],[[28,"if",[[24,["model","reassign"]],"discourse_assign.reassign.title","discourse_assign.assign_modal.assign"],null],[24,["inviteIcon"]],[28,"action",[[23,0,[]],"assign"],null],"btn-primary",[24,["disabled"]]]]],false],[0,"\\n"],[9],[0,"\\n"]],"hasEval":false}',meta:{moduleName:"javascripts/discourse/templates/modal/assign-user"}}),Ember.TEMPLATES["javascripts/user-activity-assigned"]=Ember.HTMLBars.template({id:null,block:'{"symbols":[],"statements":[[1,[22,"outlet"],false],[0,"\\n"]],"hasEval":false}',meta:{moduleName:"javascripts/discourse/templates/user-activity-assigned"}}),Ember.TEMPLATES["javascripts/user-assigned-topics"]=Ember.HTMLBars.template({id:null,block:'{"symbols":[],"statements":[[4,"if",[[24,["doesntHaveAssignments"]]],null,{"statements":[[0,"  "],[5,"empty-state",[],[["@title","@body"],[[28,"i18n",["user.no_assignments_title"],null],[22,"emptyStateBody"]]]],[0,"\\n"]],"parameters":[]},{"statements":[[0,"  "],[7,"div",true],[10,"class","topic-search-div"],[8],[0,"\\n    "],[7,"div",true],[10,"class","inline-form full-width"],[8],[0,"\\n      "],[1,[28,"input",null,[["class","value","placeholder","input","autocomplete","type"],["no-blur",[28,"readonly",[[24,["search"]]],null],[28,"i18n",["discourse_assign.topic_search_placeholder"],null],[28,"action",[[23,0,[]],"onChangeFilter"],[["value"],["target.value"]]],"off","search"]]],false],[0,"\\n    "],[9],[0,"\\n  "],[9],[0,"\\n\\n"],[4,"load-more",null,[["class","selector","action"],["paginated-topics-list",".paginated-topics-list .topic-list tr",[28,"action",[[23,0,[]],"loadMore"],null]]],{"statements":[[0,"    "],[1,[28,"basic-assigned-topic-list",null,[["topicList","hideCategory","showPosters","bulkSelectEnabled","selected","hasIncoming","incomingCount","showInserted","tagsForUser","changeSort","unassign","reassign","onScroll","scrollOnLoad"],[[24,["model"]],[24,["hideCategory"]],[24,["showPosters"]],[24,["bulkSelectEnabled"]],[24,["selected"]],[24,["hasIncoming"]],[24,["incomingCount"]],[28,"action",[[23,0,[]],"showInserted"],null],[24,["tagsForUser"]],[28,"action",[[23,0,[]],"changeSort"],null],[28,"action",[[23,0,[]],"unassign"],null],[28,"action",[[23,0,[]],"reassign"],null],[24,["saveScrollPosition"]],true]]],false],[0,"\\n\\n    "],[1,[28,"conditional-loading-spinner",null,[["condition"],[[24,["model","loadingMore"]]]]],false],[0,"\\n"]],"parameters":[]},null]],"parameters":[]}]],"hasEval":false}',meta:{moduleName:"javascripts/discourse/templates/user-assigned-topics"}}),define("discourse/plugins/discourse-assign/discourse/widgets/quick-access-assignments",["discourse/widgets/raw-html","discourse-common/lib/icon-library","discourse/widgets/widget","discourse-common/lib/get-url","discourse/lib/utilities","virtual-dom","I18n"],(function(e,s,t,n,i,a,r){"use strict";var o="user-plus";(0,t.createWidget)("no-quick-access-assignments",{html:function(){return(0,a.h)("div.empty-state",[(0,a.h)("span.empty-state-title",r.default.t("user.no_assignments_title")),(0,a.h)("div.empty-state-body",new e.default({html:"<p>"+r.default.t("user.no_assignments_body",{preferencesUrl:(0,n.default)("/my/preferences/notifications"),icon:(0,s.iconHTML)(o)}).htmlSafe()+"</p>"}))])}});var l=(0,t.queryRegistry)("quick-access-panel");l&&(0,t.createWidgetFrom)(l,"quick-access-assignments",{buildKey:function(){return"quick-access-assignments"},emptyStateWidget:"no-quick-access-assignments",showAllHref:function(){return"".concat(this.attrs.path,"/activity/assigned")},findNewItems:function(){return this.store.findFiltered("topicList",{filter:"topics/messages-assigned/".concat(this.currentUser.username_lower),params:{exclude_category_ids:[-1]}}).then((function(e){return e.topic_list.topics}))},itemHtml:function(e){return this.attach("quick-access-item",{icon:e.assigned_to_group?"group-plus":o,href:(0,i.postUrl)(e.slug,e.id,e.last_read_post_number+1),escapedContent:e.fancy_title})}})}));
//# sourceMappingURL=discourse-assign-5a312c825916a0e04cbefd798d89f3a8f75b86a45dd6e0459d585052a59f5597.js.map